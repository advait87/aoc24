let testString = """
....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...
""".split(separator: "\n").map { Array($0) }

let inputString = """
.......................#...................#....#..#......#.................#.#..#........................#.#..............#.....#
................#.#.......#..#.......#.................................................................................#.##.......
............#..............#......................#...#.....#...#..........##.........#.....#.....................................
..#...#......................................#............................#..................#..........#..#......................
....#........#.#....................#..........#.....#.............#..#............................#..................#......#....
..........................................................#................#............................................#.........
..#............................#.....#...........................#...........#........##...........................#..#...........
.....................#...........................#.#..............#......................................#.........#....#.....#...
.#...#.#.................#....................#...............................................................#.#..........#......
....#....................................#...........................................#.....#..........#...........................
.......................#..........#..............#......#....#.......#........................................#.#.................
......#...........................................................#...#............#.................#............................
.......#.................#..#.....................#...............................................................................
..............#....................#.#..........#........#......#................#.................#..........#...................
#.#.......................................#.........................#...................................#.........................
...#.........................................................................................#................#..................#
#.....#....#............................................................#.........................#..................#.#..........
.#.....#.#.......#.#..................#.#......................#.......#.....#..#..................##.....#.......#...#...........
....#.........#.................................#..........#........#...............#................#...................#....#...
.................#...............#...#.................#.................................................#........................
....#...#...............................#..................................................#..........#................#.....#....
...........#........#....#.......#...#..........#...............#.....#.....#.....#..........#....................................
............#.........#.................#................#.................#.#..................................................#.
............#......................................#...................................................................#..........
...........#....#.....................................................................................#............#..........#...
..........#........................................#.............#.................#........................#..#.......#........#.
......#.............................#.................##..................................#.....................#.................
.#.................................#.............................................#.................##.....#..............#......#.
.........................#..............................#..........#...........#....#................#......................#.....
.......#...................#......##........................#.........#...........................................................
......................................................................##...........#................#.............................
....#...................................##...............................................#........................................
...##.....#..#........#.................#..............................................................#..........................
........##......#....................#..............................#......................#...................#..................
.........................................................#.......................................................#.#..............
..........#.............................#.........#...............#................#.#.........#..........................#.#.....
....................#...................#..#.......................................................#..........#...............#...
...........................................................#........................#.........#........#..........................
.......#..............#......#.................................#...................##...........................#.........#.......
#...#...............................................................................................................#.............
................................#..#....#............#...........#..................#.............................#...............
....................#..............#.........#.................................#.............#..##................................
#...#..................................................................................#.....#...........#........................
........#...........#........#...#..................#.....#....#.........#.........................#...........................#..
.............#...#...................................................................#...........#................................
.............#........................................#...#.............#..............................#..#.........#.............
...#.................................................................................#.............#..........................##..
...#..............................................................................................................................
................#.........#..................................#...................#................................................
...#................#...#.#.....................#...........#..................................#........#....#......#.............
..........................#.....................#..#...................................##........................................#
#........................#...............................................#........#..#..........#...........................#.....
.#............#.#..............................................................#...........#......................................
......#..................................................................#.......#..............................#...#....#........
........#........................#.........#.............#.....#..................................................................
...............................................................................#...........................................#......
........................#..................................#.....................................................#................
............................................................#..........................#.................#.......................#
.....................#..#.........................#..............#.............................#........#..............##......#..
.....................#.................................................#.......#............#........................#.......#....
......................#.....................................................#......#............................#.................
................................................................#...#..##..#.....................................#...............#
..............#..............................................................................................#....................
............................................#......#..........#...............................................................#...
....#.................................#..................................................................#..........##..#.........
............#.....#................................................................................#..........#.........#.........
.....................#......................................#.........#....................................................#....#.
.........................#...............................#...............................#....................#...................
.#.....................#.#.......................................#....#...........#.......................#.......................
.....................................................#.#..#......................................................................#
#..........#..........................#............................#.............#..................#.............#...........#...
........#.........................................................................................................................
..........#.............#.........................................#................................................#..............
...........#................................#.................#...........................#.............................#.........
..................#.........................................#.#..................#...#...........#.......#..#.....................
........................................................#...#.......................................................#.............
.........................................................................#.......#..#.....#.......................................
............#..............................................................#.........#..............#.............#...............
#...#..........................................#...........#.....#.....................................#...............#..........
...........................#............#.........................................................................................
...#..........................................#.......................................................................#...........
..............#......#.....#.....................#..........................#.....................................................
.........................#....#...................#...#.......#..............................#........................#...........
.............................#............^.#................................................#......#..#.#...........#............
....................................................................................#...#.#...................................#...
.......................#..............................##..............................................#...........................
......................#...................................................#..........................................#............
......#........................................................................#.....................................#............
.......................#.............................#........................#...........#...........#............#...........#..
....#...............#..#......#....#..................#.............#.......#...............#.......................#.............
............#...#..................#..............................................................................................
....#.......#.................#.......................................................#..#......#.................................
.........#......#..........#......................#.....................#..................#.#....................................
...............##.......................................................#...#.............................#.......#...............
........................................................##...................#...#............#......#............................
...........#...#..............#.............................................................#...................#............#....
...............................................#.....#.....#......................................................................
.#....................#...#........#....................#.#.........#..........#................................#................#
.............#.....#..#....................................#.#...........#.................................................#..#.#.
......#.....................................#....................................................................#................
............................................................##......#.....................#.......#.....................#...#.....
.#.......#......................#.................................................................................................
................#....#......................#.........#...................#........#.......##.....#...............................
..#....#....................#............................................................#.#......#............#.....#.#....#.....
.................................#.................................................#.......#......................................
..................#...........#....#.....................#......#...............#..................#....................##........
.##...............................................#............#...........................#......................................
.............#...........#...........................#..#.......#...#..........#......................#..........#................
.......#...................................#.................#....#..............................................................#
........#....................................................#.................#.....#.........#.#................................
................#.................................#.....................#.....#.....#............................##...............
..............................................##.................#..##........#...........#............#..........................
....#......................................#...............................................................................#......
..#..............#.#................#..#..............#.......................................#.#.......#..............#......#..#
.....#..............................................................................................................#.......#.....
..#.......#.#..........#.......#..................................#..........#.......#.................#...........#...........#..
...............#.....#................#............#................#............#.....#.#........#...............................
....#.....................#................#.....................................#......................#.#.......#....#..........
........#...............#...#.....................................................#........#.........#.........#..................
...#......#..........................#.....#..........................##.......#....#.............................................
.............#................................#............................#.....#.......#......#................................#
.......................#............#..........................#..................................................................
.................................................#..............#...#...........................#.................................
......#...................#..............................................................................................#....#..#
....................................#......#.....................#..............#.......#...................#.....................
............#...................................#...........#........#........#...........................................##......
#...........#..........................#....................................#.........#................................#..........
......##..#...............................................................#...............................#.........#.............
.......................#.....#.........................#...#.........................#.....#..........#.#...#.....................
.......................#..#.....#.....#..........................#.........#.....#....................#.....#....................#
""".split(separator: "\n").map { Array($0) }

let testString1 = """
....#.....
.........#
..........
..#.......
.......#..
..........
.#.#^.....
........#.
#.........
......#...
""".split(separator: "\n").map { Array($0) }

let directions = ["^", ">", "<", "v"]

func findPosition(parameter: [[Character]]) -> ([Int], String) {
    var i = 0
    while i < parameter.count {
        var j = 0
        while j < parameter.count {
            if directions.contains(String(parameter[i][j])) {
                return ([i, j], String(parameter[i][j]))
            }
            j += 1
        }
        i += 1
    }
    return ([0, 0], "404")
}

func calculatePositions(positions: [[Bool]]) -> Int {
    var count = 0
    for i in positions {
        for j in i {
            if j == true {
                count += 1
            }
        }
    }
    return count
}
func checkBlock(parameter: [[Character]]) -> Int {
    var i = 0
    var count = 0
    while i < parameter.count {
        var j = 0
        while j < parameter.count {
            var fakeParameter = Array(repeating: Array(repeating: Character("."), count: parameter.count), count: parameter.count)
            // print(fakeParameter[0])
            // print(fakeParameter[0].count, fakeParameter.count)
            for l in 0..<fakeParameter.count {
                for m in 0..<fakeParameter.count {
                    fakeParameter[l][m] = parameter[l][m]
                }
            }
            // print(parameter == fakeParameter)
            if fakeParameter[i][j] != Character("#") && fakeParameter[i][j] != Character("^") {
                // let hash = Array("#")
                fakeParameter[i][j] = Character("#")
                // print(type(of: fakeParameter))
                // print(run(parameter: parameter))
                
                // print(parameter.count, parameter[0].count)
                if run(parameter: fakeParameter) == -1 {
                    print("dope", [i, j], count)
                    count += 1
                } else {
                    print(i, j)
                }
            }
            j += 1
        }
        i += 1
    }
    return count
}
func run(parameter: [[Character]]) -> Int {
    var positions = Array(repeating: Array(repeating: false, count: parameter.count), count: parameter.count)
    var y = findPosition(parameter: parameter).0[0]
    var x = findPosition(parameter: parameter).0[1]
    var playerDirection = findPosition(parameter: parameter).1
    positions[y][x] = true
    var attempts = 0
    // print(x, y)
    // return 9
    while true { 
        attempts += 1
        if attempts > 10000 {
            return -1
        }
        if playerDirection == "^" {
            if y-1 < 0 {
                // print("nope")
                // print(positions)
                return calculatePositions(positions: positions)
            } else {
                if parameter[y-1][x] == "#" {
                    playerDirection = ">"
                } else {
                    y -= 1
                    positions[y][x] = true
                }
            }
        }
        else if playerDirection == ">" {
            if x+1 == parameter.count {
                // print("HE")
                return calculatePositions(positions: positions)
            } else {
                if parameter[y][x+1] == "#" {
                    playerDirection = "v"
                } else {
                    x += 1
                    positions[y][x] = true
                }
            }
        }
        else if playerDirection == "<" {
            if x-1 < 0 {

                // print("hi")
                return calculatePositions(positions: positions)
            } else {
                if parameter[y][x-1] == "#" {
                    playerDirection = "^"
                } else {
                    x -= 1
                    positions[y][x] = true
                }
            }
        }
        else if playerDirection == "v" {
            if y+1 == parameter.count {
                // print("x out of bounds")
                return calculatePositions(positions: positions)
            } else {
                if parameter[y+1][x] == "#" {
                    playerDirection = "<"
                } else {
                    y += 1
                    positions[y][x] = true
                }
            }
        }
    }
}


// print(findPosition(parameter: testString).0, findPosition(parameter: testString).1)
// print(findPosition(parameter: inputString))
print(checkBlock(parameter: inputString))
// print(checkBlock(parameter: testString))
// output -> 